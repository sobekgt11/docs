---
title: Reenviar Envelope
description: Reenvia um envelope existente para os destinat√°rios.
openapi: 'POST /api/envelopes/resend'
---

Este endpoint permite reenviar um envelope existente, gerando novos emails de notifica√ß√£o para os destinat√°rios.

<RequestExample dropdown>

```bash cURL
# Reenviar contrato de trabalho ap√≥s corre√ß√£o de email do funcion√°rio
curl -X POST "https://api.formsign.com.br/api/envelopes/resend" \
  -H "Authorization: Bearer <TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{
    "envelopeId": "env_contrato_trabalho_2024_045"
  }'
```

```javascript JavaScript
// Cen√°rio: Sistema de RH reenviando contrato ap√≥s resolu√ß√£o de problema t√©cnico
async function reenviarContratoTrabalho(envelopeId, nomeColaborador) {
  console.log(`üîÑ Reenviando contrato de trabalho...`);
  console.log(`üë§ Colaborador: ${nomeColaborador}`);
  console.log(`üìÑ Envelope ID: ${envelopeId}`);
  
  try {
    const response = await fetch('https://api.formsign.com.br/api/envelopes/resend', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer <TOKEN>',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        envelopeId: envelopeId
      })
    });

    if (response.ok) {
      const result = await response.json();
      console.log('‚úÖ Contrato reenviado com sucesso!');
      console.log(`üìÑ Envelope: ${result.envelopeId}`);
      console.log(`üìß Status: ${result.message}`);
      
      // Log para sistema de RH
      console.log('\n=== REGISTRO RH ===');
      console.log(`üìÖ Data/Hora: ${new Date().toLocaleString('pt-BR')}`);
      console.log(`üéØ Motivo: Email de contrato reenviado ap√≥s corre√ß√£o de dados`);
      console.log(`üìã Pr√≥ximos passos: Aguardar assinatura do colaborador`);
      
      return { success: true, envelopeId: result.envelopeId };
      
    } else {
      const error = await response.json();
      console.error('‚ùå Erro ao reenviar:', error.error);
      
      if (response.status === 400) {
        console.error('üí° Poss√≠vel causa: Envelope j√° foi completado ou cancelado');
      } else if (response.status === 404) {
        console.error('üí° Poss√≠vel causa: Envelope n√£o encontrado');
      }
      
      return { success: false, error: error.error };
    }
    
  } catch (error) {
    console.error('‚ùå Erro de conex√£o:', error.message);
    return { success: false, error: error.message };
  }
}

// Exemplo de uso
const resultado = await reenviarContratoTrabalho(
  'env_contrato_trabalho_2024_045',
  'Ana Paula Santos'
);

if (resultado.success) {
  console.log('\n‚úÖ Processo conclu√≠do - colaborador ser√° notificado por email');
} else {
  console.log('\n‚ùå Falha no reenvio - verificar com equipe t√©cnica');
}
```

```python Python
import requests
from datetime import datetime
import logging

# Configurar logging para auditoria
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

class GerenciadorEnvelopes:
    def __init__(self, token):
        self.token = token
        self.base_url = 'https://api.formsign.com.br'
        self.headers = {
            'Authorization': f'Bearer {token}',
            'Content-Type': 'application/json'
        }
    
    def reenviar_envelope(self, envelope_id, motivo_reenvio=None):
        """
        Reenvia um envelope para os destinat√°rios
        
        Args:
            envelope_id (str): ID do envelope a ser reenviado
            motivo_reenvio (str): Motivo do reenvio para log de auditoria
        
        Returns:
            dict: Resultado da opera√ß√£o
        """
        
        logger.info(f"Iniciando reenvio do envelope: {envelope_id}")
        if motivo_reenvio:
            logger.info(f"Motivo: {motivo_reenvio}")
        
        payload = {"envelopeId": envelope_id}
        
        try:
            response = requests.post(
                f'{self.base_url}/api/envelopes/resend',
                json=payload,
                headers=self.headers,
                timeout=30
            )
            
            if response.status_code == 200:
                result = response.json()
                logger.info(f"‚úÖ Envelope reenviado com sucesso: {result['envelopeId']}")
                
                # Registrar evento de auditoria
                audit_data = {
                    'acao': 'reenvio_envelope',
                    'envelope_id': envelope_id,
                    'timestamp': datetime.now().isoformat(),
                    'motivo': motivo_reenvio or 'N√£o informado',
                    'resultado': 'sucesso'
                }
                
                logger.info(f"üìã Auditoria: {audit_data}")
                
                return {
                    'sucesso': True,
                    'envelope_id': result['envelopeId'],
                    'mensagem': result['message'],
                    'audit': audit_data
                }
                
            else:
                error = response.json()
                logger.error(f"‚ùå Erro HTTP {response.status_code}: {error.get('error', 'Erro desconhecido')}")
                
                # Mapear c√≥digos de erro comuns
                error_messages = {
                    400: "Envelope n√£o pode ser reenviado (j√° completado, cancelado ou inv√°lido)",
                    401: "Token de autoriza√ß√£o inv√°lido ou expirado", 
                    404: "Envelope n√£o encontrado ou n√£o pertence ao usu√°rio",
                    429: "Muitas tentativas - aguarde antes de tentar novamente",
                    500: "Erro interno do servidor - tente novamente em alguns minutos"
                }
                
                friendly_error = error_messages.get(response.status_code, f"Erro HTTP {response.status_code}")
                
                return {
                    'sucesso': False,
                    'erro': error.get('error', 'Erro desconhecido'),
                    'codigo_http': response.status_code,
                    'mensagem_amigavel': friendly_error
                }
                
        except requests.exceptions.Timeout:
            logger.error("‚ùå Timeout na requisi√ß√£o")
            return {'sucesso': False, 'erro': 'Timeout na conex√£o com o servidor'}
            
        except requests.exceptions.ConnectionError:
            logger.error("‚ùå Erro de conex√£o")
            return {'sucesso': False, 'erro': 'Erro de conex√£o com o servidor'}
            
        except Exception as e:
            logger.error(f"‚ùå Erro inesperado: {str(e)}")
            return {'sucesso': False, 'erro': f'Erro inesperado: {str(e)}'}

# Exemplo de uso em um sistema de gest√£o de documentos
def main():
    # Cen√°rio: Sistema de imobili√°ria reenviando contrato de compra e venda
    gerenciador = GerenciadorEnvelopes('<TOKEN>')
    
    envelope_id = "env_compra_venda_imovel_sp_2024"
    motivo = "Cliente informou que n√£o recebeu o email inicial. Caixa de spam verificada. Solicitado reenvio via WhatsApp."
    
    print("üè† Sistema de Gest√£o Imobili√°ria")
    print(f"üìÑ Reenviando contrato: {envelope_id}")
    print(f"üìÖ Data: {datetime.now().strftime('%d/%m/%Y %H:%M:%S')}")
    print(f"üîç Motivo: {motivo}")
    
    resultado = gerenciador.reenviar_envelope(envelope_id, motivo)
    
    if resultado['sucesso']:
        print(f"\n‚úÖ REENVIO CONCLU√çDO")
        print(f"üìÑ Envelope: {resultado['envelope_id']}")
        print(f"üìù Mensagem: {resultado['mensagem']}")
        print(f"üìã Auditoria registrada: {resultado['audit']['timestamp']}")
        
        # Pr√≥ximas a√ß√µes do sistema
        print(f"\n=== PR√ìXIMAS A√á√ïES ===")
        print("üìß Email de notifica√ß√£o enviado aos clientes")
        print("üì± WhatsApp de confirma√ß√£o ser√° enviado")
        print("üìÖ Lembrete agendado para 24h")
        
    else:
        print(f"\n‚ùå FALHA NO REENVIO")
        print(f"üö® Erro: {resultado['erro']}")
        print(f"üí° Sugest√£o: {resultado.get('mensagem_amigavel', 'Verificar logs')}")
        
        # Escala√ß√£o autom√°tica do erro
        print(f"\n=== ESCALA√á√ÉO ===")
        print("üìß Notificando supervisor")
        print("üîß Ticket t√©cnico criado automaticamente")

if __name__ == "__main__":
    main()
```

```go Go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "net/http"
)

func main() {
    payload := map[string]string{
        "envelopeId": "env_abc123456789",
    }
    
    jsonData, _ := json.Marshal(payload)
    req, _ := http.NewRequest("POST", "https://api.formsign.com.br/api/envelopes/resend", bytes.NewBuffer(jsonData))
    req.Header.Set("Authorization", "Bearer <TOKEN>")
    req.Header.Set("Content-Type", "application/json")
    
    client := &http.Client{}
    resp, _ := client.Do(req)
    defer resp.Body.Close()
    
    var result map[string]interface{}
    json.NewDecoder(resp.Body).Decode(&result)
    
    fmt.Printf("Envelope reenviado: %v\n", result["envelopeId"])
}
```

</RequestExample>

### Par√¢metros (Body)

<ParamField body="envelopeId" type="string" required>ID do envelope a ser reenviado.</ParamField>

### Como Funciona

1. **Valida√ß√£o**: Verifica se o envelope existe e pertence ao usu√°rio
2. **Status Check**: Confirma se o envelope pode ser reenviado (deve estar com status `sent`)
3. **Reenvio**: Gera novos emails para todos os destinat√°rios pendentes
4. **Log**: Registra a a√ß√£o no hist√≥rico do envelope

### Quando Usar

- Destinat√°rio n√£o recebeu o email original
- Email foi para spam/lixo eletr√¥nico
- Necessidade de lembrar destinat√°rios pendentes
- Ap√≥s altera√ß√£o de dados de contato

### Regras de Neg√≥cio

- Envelope deve ter status `sent`
- Envelope n√£o pode estar `completed`, `voided` ou `expired`
- Apenas destinat√°rios pendentes recebem novo email
- Destinat√°rios que j√° assinaram n√£o s√£o notificados novamente

### Respostas

<ResponseExample>
```json 200 Sucesso
{
  "message": "Success",
  "envelopeId": "env_abc123456789"
}
```

```json 400 ID Ausente
{
  "error": "envelopeId √© obrigat√≥rio"
}
```

```json 404 Envelope N√£o Encontrado
{
  "error": "Envelope n√£o encontrado"
}
```

```json 400 Status Inv√°lido
{
  "error": "Envelope n√£o pode ser reenviado. Status atual: completed"
}
```

```json 401 N√£o Autorizado
{
  "error": "Unauthorized"
}
```

```json 500 Erro no Reenvio
{
  "error": "Falha ao reenviar envelope: [detalhes do erro]"
}
```
</ResponseExample>

### Status V√°lidos para Reenvio

| Status | Pode Reenviar? | Motivo |
|--------|----------------|---------|
| `sent` | ‚úÖ | Status normal para reenvio |
| `draft` | ‚ùå | Envelope ainda n√£o foi enviado |
| `completed` | ‚ùå | Todas assinaturas j√° coletadas |
| `voided` | ‚ùå | Envelope foi cancelado |
| `expired` | ‚ùå | Envelope expirou |

### Campos da Response

<ResponseField name="message" type="string">Mensagem de confirma√ß√£o ("Success").</ResponseField>
<ResponseField name="envelopeId" type="string">ID do envelope reenviado.</ResponseField>

<Tip>
**Limite de Reenvios**: N√£o h√° limite t√©cnico, mas use com modera√ß√£o para evitar spam. Considere usar lembretes autom√°ticos via `advancedOptions.autoReminders`.
</Tip>

<Note>
O reenvio gera novos tokens de acesso, invalidando links anteriores de destinat√°rios pendentes. Destinat√°rios que j√° assinaram mant√™m seus dados.
</Note>