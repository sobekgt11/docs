---
title: Cancelar Envelope
description: Cancela (anula) um envelope enviado, impedindo novas assinaturas.
openapi: 'POST /api/envelopes/void'
---

Este endpoint permite cancelar um envelope que foi enviado, impedindo que destinat√°rios fa√ßam novas assinaturas. O cancelamento √© irrevers√≠vel.

<RequestExample dropdown>

```bash cURL
curl -X POST "https://api.formsign.com.br/api/envelopes/void" \
  -H "Authorization: Bearer <TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{
    "envelopeId": "env_abc123456789",
    "justificativa": "Cliente informou que desistiu da compra do im√≥vel. Cancelamento solicitado via telefone em 15/08/2024 √†s 14:30h por Jo√£o Silva (CPF: 123.456.789-00)."
  }'
```

```javascript JavaScript
// Cen√°rio: Sistema de gest√£o de contratos com cancelamento por mudan√ßa de termos
const envelopeId = 'env_contrato_locacao_2024_001';

const response = await fetch('https://api.formsign.com.br/api/envelopes/void', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer <TOKEN>',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    envelopeId: envelopeId,
    justificativa: 'Necess√°rio alterar cl√°usulas do contrato de loca√ß√£o. Propriet√°rio solicitou inclus√£o de nova cl√°usula sobre animais de estima√ß√£o. Novo envelope ser√° criado com termos atualizados.'
  })
});

if (response.ok) {
  const result = await response.json();
  console.log('‚úÖ Envelope cancelado com sucesso!');
  console.log(`üìÑ Envelope ID: ${result.envelopeId}`);
  console.log(`üìÖ Cancelado em: ${new Date().toLocaleString('pt-BR')}`);
  console.log(`üìù Status: ${result.message}`);
  
  // Log para auditoria interna
  console.log('\n=== PR√ìXIMOS PASSOS ===');
  console.log('1. Informar destinat√°rios sobre o cancelamento');
  console.log('2. Preparar nova vers√£o do contrato');
  console.log('3. Criar novo envelope com termos atualizados');
  
} else {
  const error = await response.json();
  console.error('‚ùå Erro ao cancelar envelope:', error.error);
  
  if (response.status === 400) {
    console.error('üí° Poss√≠vel causa: Envelope j√° foi assinado ou j√° est√° cancelado');
  } else if (response.status === 404) {
    console.error('üí° Poss√≠vel causa: Envelope n√£o encontrado ou n√£o pertence a este usu√°rio');
  }
}
```

```python Python
import requests
from datetime import datetime

# Cen√°rio: Cancelamento de NDA por mudan√ßa na parceria empresarial
envelope_data = {
    "envelopeId": "env_nda_empresa_tech_2024",
    "justificativa": "Parceria comercial foi cancelada ap√≥s reuni√£o do board. Empresa Tech Solutions informou que n√£o prosseguir√° com o projeto Alpha. Email de confirma√ß√£o recebido em 20/08/2024. Respons√°vel: Maria Santos (Gerente Comercial)."
}

print("üîÑ Iniciando cancelamento do envelope...")
print(f"üìÑ Envelope: {envelope_data['envelopeId']}")
print(f"üìÖ Data/Hora: {datetime.now().strftime('%d/%m/%Y %H:%M:%S')}")

response = requests.post(
    'https://api.formsign.com.br/api/envelopes/void',
    json=envelope_data,
    headers={'Authorization': 'Bearer <TOKEN>'}
)

if response.status_code == 200:
    result = response.json()
    print(f"\n‚úÖ CANCELAMENTO REALIZADO COM SUCESSO!")
    print(f"üìÑ Envelope ID: {result['envelopeId']}")
    print(f"üìù Mensagem: {result['message']}")
    
    # Log de auditoria
    print(f"\n=== REGISTRO DE AUDITORIA ===")
    print(f"A√ß√£o: Cancelamento de envelope")
    print(f"Usu√°rio: [Obtido do token JWT]") 
    print(f"Data/Hora: {datetime.now().isoformat()}")
    print(f"Motivo: {envelope_data['justificativa'][:100]}{'...' if len(envelope_data['justificativa']) > 100 else ''}")
    
    # Notificar sistema de CRM ou outros sistemas integrados
    print(f"\n=== INTEGRA√á√ïES ===")
    print("üìß Notificar por email: Pendente")
    print("üìä Atualizar CRM: Pendente") 
    print("üìÅ Arquivar documentos: Pendente")
    
elif response.status_code == 400:
    error = response.json()
    print(f"‚ùå ERRO: {error['error']}")
    print("üí° Verifique se o envelope ainda pode ser cancelado (n√£o foi completado/j√° cancelado)")
    
elif response.status_code == 404:
    print("‚ùå ERRO: Envelope n√£o encontrado")
    print("üí° Verifique se o ID est√° correto e se pertence ao seu usu√°rio")
    
elif response.status_code == 401:
    print("‚ùå ERRO: N√£o autorizado")
    print("üí° Verifique se o token Bearer est√° v√°lido")
    
else:
    print(f"‚ùå ERRO INESPERADO: Status {response.status_code}")
    try:
        error_detail = response.json()
        print(f"Detalhes: {error_detail}")
    except:
        print(f"Resposta: {response.text}")
```

```go Go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "net/http"
)

func main() {
    payload := map[string]string{
        "envelopeId":     "env_abc123456789",
        "justificativa": "Cliente solicitou cancelamento do contrato",
    }
    
    jsonData, _ := json.Marshal(payload)
    req, _ := http.NewRequest("POST", "https://api.formsign.com.br/api/envelopes/void", bytes.NewBuffer(jsonData))
    req.Header.Set("Authorization", "Bearer <TOKEN>")
    req.Header.Set("Content-Type", "application/json")
    
    client := &http.Client{}
    resp, _ := client.Do(req)
    defer resp.Body.Close()
    
    var result map[string]interface{}
    json.NewDecoder(resp.Body).Decode(&result)
    
    fmt.Printf("Envelope cancelado: %v\n", result["envelopeId"])
}
```

</RequestExample>

### Par√¢metros (Body)

<ParamField body="envelopeId" type="string" required>ID do envelope a ser cancelado.</ParamField>
<ParamField body="justificativa" type="string" required>Motivo do cancelamento (para auditoria).</ParamField>

### Como Funciona

1. **Valida√ß√£o**: Verifica se o envelope existe e pertence ao usu√°rio
2. **Status Check**: Confirma se o envelope pode ser cancelado
3. **Cancelamento**: Altera status para `voided` e invalida todos os links
4. **Notifica√ß√£o**: Envia emails informando o cancelamento aos destinat√°rios
5. **Log**: Registra o cancelamento no hist√≥rico com a justificativa

### Quando Usar

- Erro no documento ou dados enviados
- Cliente desistiu do processo
- Necessidade de enviar nova vers√£o
- Problemas legais ou contratuais
- Envelope enviado por engano

### Regras de Cancelamento

- **Status V√°lidos**: Apenas envelopes com status `sent`
- **Irrevers√≠vel**: Cancelamento n√£o pode ser desfeito
- **Justificativa Obrigat√≥ria**: Para fins de auditoria e compliance
- **Notifica√ß√£o Autom√°tica**: Destinat√°rios s√£o informados por email

### Status V√°lidos para Cancelamento

| Status | Pode Cancelar? | Motivo |
|--------|----------------|---------|
| `sent` | ‚úÖ | Status normal para cancelamento |
| `draft` | ‚ùå | Use exclus√£o ao inv√©s de cancelamento |
| `completed` | ‚ùå | Envelope j√° foi conclu√≠do |
| `voided` | ‚ùå | Envelope j√° est√° cancelado |
| `expired` | ‚ùå | Envelope j√° expirou naturalmente |

### Respostas

<ResponseExample>
```json 200 Sucesso
{
  "message": "Envelope cancelado com sucesso",
  "envelopeId": "env_abc123456789"
}
```

```json 400 Dados Ausentes
{
  "error": "envelopeId e justificativa s√£o obrigat√≥rios"
}
```

```json 404 Envelope N√£o Encontrado
{
  "error": "Envelope n√£o encontrado"
}
```

```json 400 J√° Cancelado
{
  "error": "Envelope j√° est√° cancelado"
}
```

```json 400 J√° Completo
{
  "error": "N√£o √© poss√≠vel cancelar um envelope j√° completo"
}
```

```json 401 N√£o Autorizado
{
  "error": "Unauthorized"
}
```

```json 500 Erro no Cancelamento
{
  "error": "Falha ao cancelar envelope: [detalhes do erro]"
}
```
</ResponseExample>

### Campos da Response

<ResponseField name="message" type="string">Mensagem de confirma√ß√£o do cancelamento.</ResponseField>
<ResponseField name="envelopeId" type="string">ID do envelope cancelado.</ResponseField>

### Efeitos do Cancelamento

1. **Status**: Envelope alterado para `voided`
2. **Links**: Todos os links de assinatura s√£o invalidados
3. **Emails**: Destinat√°rios recebem notifica√ß√£o de cancelamento
4. **Hist√≥rico**: A√ß√£o registrada com timestamp e justificativa
5. **Dashboard**: Envelope aparece na lista com status cancelado

<Warning>
**A√ß√£o Irrevers√≠vel**: O cancelamento n√£o pode ser desfeito. Se precisar reenviar, ser√° necess√°rio criar um novo envelope.
</Warning>

<Tip>
**Justificativa Clara**: Use justificativas descritivas para facilitar auditoria futura. Ex: "Erro na vers√£o do documento", "Cliente solicitou altera√ß√£o no prazo".
</Tip>