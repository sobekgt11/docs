---
title: Hist√≥rico do Envelope
description: Obt√©m o hist√≥rico completo de a√ß√µes realizadas em um envelope.
openapi: 'GET /api/envelopes/{envelopeId}/history'
---

Este endpoint retorna o hist√≥rico completo de todas as a√ß√µes realizadas em um envelope espec√≠fico, incluindo cria√ß√£o, envio, visualiza√ß√µes, assinaturas e cancelamentos.

<RequestExample>
<CodeGroup>

```bash cURL
curl -X GET "https://api.formsign.com.br/api/envelopes/env_abc123456789/history" \
  -H "Authorization: Bearer <TOKEN>"
```

```javascript JavaScript
const envelopeId = 'env_abc123456789';
const response = await fetch(`https://api.formsign.com.br/api/envelopes/${envelopeId}/history`, {
  headers: {
    'Authorization': 'Bearer <TOKEN>'
  }
});

if (response.ok) {
  const history = await response.json();
  console.log(`=== HIST√ìRICO DO ENVELOPE (${history.length} a√ß√µes) ===`);
  
  history.forEach((action, index) => {
    const date = new Date(action.creationDate).toLocaleString('pt-BR');
    console.log(`\n${index + 1}. [${date}] ${action.action.toUpperCase()}`);
    console.log(`   Executor: ${action.executorName} (${action.executorId})`);
    
    if (action.executorIp) {
      console.log(`   IP: ${action.executorIp}`);
    }
    
    // Diferentes tipos de a√ß√£o com contexto adicional
    switch(action.action.toLowerCase()) {
      case 'created':
        console.log(`   üìÑ Envelope criado e preparado para envio`);
        break;
      case 'sent':
        console.log(`   üìß Envelope enviado para todos os destinat√°rios`);
        break;
      case 'viewed':
        console.log(`   üëÄ Documento visualizado pelo destinat√°rio`);
        break;
      case 'signed':
        console.log(`   ‚úçÔ∏è Documento assinado digitalmente`);
        break;
      case 'completed':
        console.log(`   ‚úÖ Todas as assinaturas foram coletadas`);
        break;
      case 'voided':
        console.log(`   ‚ùå Envelope cancelado - processo interrompido`);
        break;
      case 'declined':
        console.log(`   üö´ Assinatura recusada pelo destinat√°rio`);
        break;
      case 'expired':
        console.log(`   ‚è∞ Envelope expirado por falta de a√ß√£o`);
        break;
      case 'reminder_sent':
        console.log(`   üîî Lembrete autom√°tico enviado`);
        break;
      default:
        console.log(`   üîß A√ß√£o: ${action.action}`);
    }
  });
  
  // Resumo do status atual
  const lastAction = history[history.length - 1];
  console.log(`\n=== STATUS ATUAL ===`);
  console.log(`√öltima a√ß√£o: ${lastAction.action} em ${new Date(lastAction.creationDate).toLocaleString('pt-BR')}`);
  
} else {
  console.error('Erro ao buscar hist√≥rico:', response.status);
  const error = await response.json();
  console.error(error);
}
```

```python Python
import requests
from datetime import datetime

envelope_id = 'env_abc123456789'
response = requests.get(
    f'https://api.formsign.com.br/api/envelopes/{envelope_id}/history',
    headers={'Authorization': 'Bearer <TOKEN>'}
)

if response.status_code == 200:
    history = response.json()
    print(f"=== HIST√ìRICO DO ENVELOPE ({len(history)} a√ß√µes) ===")
    
    action_icons = {
        'created': 'üìÑ',
        'sent': 'üìß', 
        'viewed': 'üëÄ',
        'signed': '‚úçÔ∏è',
        'completed': '‚úÖ',
        'voided': '‚ùå',
        'declined': 'üö´',
        'expired': '‚è∞',
        'reminder_sent': 'üîî'
    }
    
    action_descriptions = {
        'created': 'Envelope criado e preparado para envio',
        'sent': 'Envelope enviado para todos os destinat√°rios',
        'viewed': 'Documento visualizado pelo destinat√°rio',
        'signed': 'Documento assinado digitalmente',
        'completed': 'Todas as assinaturas foram coletadas',
        'voided': 'Envelope cancelado - processo interrompido',
        'declined': 'Assinatura recusada pelo destinat√°rio',
        'expired': 'Envelope expirado por falta de a√ß√£o',
        'reminder_sent': 'Lembrete autom√°tico enviado'
    }
    
    for i, action in enumerate(history, 1):
        # Converter data para formato brasileiro
        action_date = datetime.fromisoformat(action['creationDate'].replace('Z', '+00:00'))
        formatted_date = action_date.strftime('%d/%m/%Y %H:%M:%S')
        
        action_key = action['action'].lower()
        icon = action_icons.get(action_key, 'üîß')
        description = action_descriptions.get(action_key, f"A√ß√£o: {action['action']}")
        
        print(f"\n{i}. [{formatted_date}] {action['action'].upper()}")
        print(f"   Executor: {action['executorName']} ({action['executorId']})")
        
        if action.get('executorIp'):
            print(f"   IP: {action['executorIp']}")
            
        print(f"   {icon} {description}")
    
    # Estat√≠sticas do hist√≥rico
    print(f"\n=== ESTAT√çSTICAS ===")
    action_counts = {}
    for action in history:
        action_type = action['action'].lower()
        action_counts[action_type] = action_counts.get(action_type, 0) + 1
    
    for action_type, count in action_counts.items():
        icon = action_icons.get(action_type, 'üîß')
        print(f"{icon} {action_type.capitalize()}: {count}")
    
    # Status atual
    if history:
        last_action = history[-1]
        last_date = datetime.fromisoformat(last_action['creationDate'].replace('Z', '+00:00'))
        print(f"\n=== STATUS ATUAL ===")
        print(f"√öltima a√ß√£o: {last_action['action']} em {last_date.strftime('%d/%m/%Y %H:%M:%S')}")
        print(f"Por: {last_action['executorName']}")
        
else:
    print(f"Erro ao buscar hist√≥rico: {response.status_code}")
    print(response.json())
```

```go Go
package main

import (
    "encoding/json"
    "fmt"
    "net/http"
)

func main() {
    envelopeID := "env_abc123456789"
    req, _ := http.NewRequest("GET", fmt.Sprintf("https://api.formsign.com.br/api/envelopes/%s/history", envelopeID), nil)
    req.Header.Set("Authorization", "Bearer <TOKEN>")
    
    client := &http.Client{}
    resp, _ := client.Do(req)
    defer resp.Body.Close()
    
    var history []map[string]interface{}
    json.NewDecoder(resp.Body).Decode(&history)
    
    fmt.Printf("Hist√≥rico com %d a√ß√µes\n", len(history))
    for _, action := range history {
        fmt.Printf("%v: %v por %v\n", action["creationDate"], action["action"], action["executorName"])
    }
}
```

</CodeGroup>
</RequestExample>

### Par√¢metros (Path)

<ParamField path="envelopeId" type="string" required>ID √∫nico do envelope.</ParamField>

### Tipos de A√ß√µes no Hist√≥rico

| A√ß√£o | Descri√ß√£o | Executor |
|------|-----------|----------|
| `envelope_created` | Envelope foi criado | Remetente |
| `envelope_sent` | Envelope foi enviado | Sistema |
| `envelope_opened` | Destinat√°rio abriu o envelope | Destinat√°rio |
| `envelope_viewed` | Destinat√°rio visualizou documento | Destinat√°rio |
| `field_filled` | Campo foi preenchido | Destinat√°rio |
| `envelope_signed` | Envelope foi assinado | Destinat√°rio |
| `envelope_completed` | Todas assinaturas coletadas | Sistema |
| `envelope_resent` | Envelope foi reenviado | Remetente |
| `envelope_voided` | Envelope foi cancelado | Remetente |
| `envelope_expired` | Envelope expirou | Sistema |
| `reminder_sent` | Lembrete enviado | Sistema |

### Respostas

<ResponseExample>
```json 200 Sucesso
[
  {
    "envelopeId": "env_abc123456789",
    "action": "envelope_created",
    "executorId": "user_123",
    "executorName": "Maria Santos",
    "executorIp": "192.168.1.100",
    "creationDate": "2024-08-15T10:30:00Z"
  },
  {
    "envelopeId": "env_abc123456789",
    "action": "envelope_sent",
    "executorId": "system",
    "executorName": "Sistema",
    "executorIp": null,
    "creationDate": "2024-08-15T10:35:00Z"
  },
  {
    "envelopeId": "env_abc123456789",
    "action": "envelope_opened",
    "executorId": "rec_789",
    "executorName": "Jo√£o Silva",
    "executorIp": "203.45.67.89",
    "creationDate": "2024-08-15T14:22:00Z"
  },
  {
    "envelopeId": "env_abc123456789",
    "action": "envelope_viewed",
    "executorId": "rec_789",
    "executorName": "Jo√£o Silva",
    "executorIp": "203.45.67.89",
    "creationDate": "2024-08-15T14:23:00Z"
  },
  {
    "envelopeId": "env_abc123456789",
    "action": "field_filled",
    "executorId": "rec_789",
    "executorName": "Jo√£o Silva",
    "executorIp": "203.45.67.89",
    "creationDate": "2024-08-15T14:25:00Z"
  },
  {
    "envelopeId": "env_abc123456789",
    "action": "envelope_signed",
    "executorId": "rec_789",
    "executorName": "Jo√£o Silva",
    "executorIp": "203.45.67.89",
    "creationDate": "2024-08-15T14:27:00Z"
  },
  {
    "envelopeId": "env_abc123456789",
    "action": "envelope_completed",
    "executorId": "system",
    "executorName": "Sistema",
    "executorIp": null,
    "creationDate": "2024-08-15T14:28:00Z"
  }
]
```

```json 404 Envelope N√£o Encontrado
{
  "error": "Envelope n√£o encontrado"
}
```

```json 401 N√£o Autorizado
{
  "error": "Unauthorized"
}
```

```json 400 ID Inv√°lido
{
  "error": "ID do envelope n√£o fornecido"
}
```

```json 500 Erro Interno
{
  "error": "Falha ao buscar hist√≥rico do envelope"
}
```
</ResponseExample>

### Campos da Response

<ResponseField name="[]" type="array">Lista de a√ß√µes ordenada cronologicamente (mais antiga primeiro).</ResponseField>

<Expandable title="Estrutura de Cada A√ß√£o">
  <ResponseField name="envelopeId" type="string">ID do envelope.</ResponseField>
  <ResponseField name="action" type="string">Tipo da a√ß√£o realizada.</ResponseField>
  <ResponseField name="executorId" type="string">ID de quem executou a a√ß√£o.</ResponseField>
  <ResponseField name="executorName" type="string">Nome de quem executou a a√ß√£o.</ResponseField>
  <ResponseField name="executorIp" type="string">Endere√ßo IP de origem (se aplic√°vel).</ResponseField>
  <ResponseField name="creationDate" type="string">Timestamp da a√ß√£o (ISO 8601).</ResponseField>
</Expandable>

### Casos de Uso

1. **Auditoria**: Rastrear quem fez o qu√™ e quando
2. **Compliance**: Evid√™ncias para processos legais
3. **Troubleshooting**: Identificar onde o processo parou
4. **An√°lise**: Entender o comportamento dos destinat√°rios
5. **Notifica√ß√µes**: Implementar alertas baseados em a√ß√µes

### Executores Especiais

| Executor | Tipo | Descri√ß√£o |
|----------|------|-----------|
| `user_*` | Usu√°rio | Propriet√°rio do envelope |
| `rec_*` | Destinat√°rio | Quem assina/visualiza |
| `system` | Sistema | A√ß√µes autom√°ticas |

### Ordena√ß√£o

As a√ß√µes s√£o sempre retornadas em ordem cronol√≥gica crescente (mais antiga primeiro), facilitando o acompanhamento sequencial do processo.

<Note>
**Reten√ß√£o de Dados**: O hist√≥rico √© mantido indefinidamente para fins de compliance e auditoria. IPs s√£o coletados apenas para a√ß√µes de destinat√°rios.
</Note>

<Tip>
**An√°lise de Padr√µes**: Use o hist√≥rico para identificar padr√µes como tempo m√©dio entre envio e assinatura, ou destinat√°rios que frequentemente demoram para assinar.
</Tip>